<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>友链编辑器 - Qiwi主题</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #161616 100%);
            color: #e8e8e8;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #161616 0%, #1f1f1f 100%);
            border-radius: 12px;
            border: 1px solid #2a2a2a;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #d99f00 0%, #bf9200 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #a8a8a8;
            max-width: 600px;
            margin: 0 auto;
        }

        .editor-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .editor-section {
            background: linear-gradient(135deg, #161616 0%, #1f1f1f 100%);
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #d99f00;
            color: #e8e8e8;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #d99f00;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: #0a0a0a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            color: #e8e8e8;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #d99f00;
            box-shadow: 0 0 0 3px rgba(217, 159, 0, 0.1);
        }

        .form-group textarea {
            min-height: 400px;
            resize: vertical;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            line-height: 1.4;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .tag-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .tag-input input {
            flex: 1;
        }

        .add-tag-btn {
            padding: 12px 16px;
            background: linear-gradient(135deg, #d99f00 0%, #bf9200 100%);
            color: #0a0a0a;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .add-tag-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(217, 159, 0, 0.3);
        }

        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .tag-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            background: linear-gradient(135deg, #d99f00 0%, #bf9200 100%);
            color: #0a0a0a;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .remove-tag {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }

        .remove-tag:hover {
            opacity: 1;
        }

        .friends-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: #0a0a0a;
            border-radius: 8px;
            border: 1px solid #2a2a2a;
        }

        .friend-item {
            background: #1f1f1f;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .friend-item:hover {
            border-color: #d99f00;
            transform: translateY(-2px);
        }

        .friend-item-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .friend-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #d99f00;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #0a0a0a;
        }

        .friend-name {
            font-weight: 600;
            color: #e8e8e8;
        }

        .friend-description {
            font-size: 12px;
            color: #a8a8a8;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .friend-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .friend-tag {
            padding: 2px 6px;
            background: #d99f00;
            color: #0a0a0a;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 500;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d99f00 0%, #bf9200 100%);
            color: #0a0a0a;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(217, 159, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            color: #e8e8e8;
            border: 1px solid #3a3a3a;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%);
            border-color: #d99f00;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .status-message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .status-success {
            background: rgba(70, 180, 80, 0.1);
            color: #46b450;
            border: 1px solid rgba(70, 180, 80, 0.3);
        }

        .status-error {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-tab {
            padding: 8px 16px;
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #d99f00 0%, #bf9200 100%);
            color: #0a0a0a;
            border-color: #d99f00;
        }

        .category-tab:hover:not(.active) {
            border-color: #d99f00;
            background: #3a3a3a;
        }

        .hidden {
            display: none;
        }

        .sample-data {
            background: #1f1f1f;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }

        .sample-data h4 {
            margin-bottom: 10px;
            color: #d99f00;
        }

        .sample-data pre {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
            color: #e8e8e8;
        }

        @media (max-width: 768px) {
            .editor-wrapper {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .friends-list {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>友链编辑器</h1>
            <p>在这里可以方便地编辑友链数据，支持可视化编辑和JSON格式转换</p>
        </div>

        <div id="statusMessage" class="status-message hidden"></div>

        <div class="action-buttons">
            <button id="jsonToFormBtn" class="btn btn-primary">JSON → 表单</button>
            <button id="formToJsonBtn" class="btn btn-primary">表单 → JSON</button>
            <button id="addFriendBtn" class="btn btn-secondary">添加友链</button>
            <button id="clearAllBtn" class="btn btn-secondary">清空所有</button>
        </div>

        <div class="editor-wrapper">
            <div class="editor-section">
                <h2 class="section-title">JSON 编辑器</h2>
                <div class="form-group">
                    <label for="jsonEditor">JSON 数据</label>
                    <textarea id="jsonEditor" placeholder="在这里粘贴或编辑JSON数据...">{
  "技术": [
    {
      "name": "示例网站",
      "url": "https://example.com",
      "avatar": "https://example.com/avatar.jpg",
      "description": "这是一个示例网站",
      "tags": [
        {"name": "技术", "color": "#d99f00"},
        {"name": "博客", "color": "#007cba"}
      ]
    }
  ],
  "推荐": [
    {
      "name": "推荐网站",
      "url": "https://recommend.com",
      "avatar": "https://recommend.com/avatar.jpg",
      "description": "这是一个推荐网站",
      "tags": [
        {"name": "推荐", "color": "#46b450"}
      ]
    }
  ]
}</textarea>
                </div>
            </div>

            <div class="editor-section">
                <h2 class="section-title">可视化编辑器</h2>

                <div class="category-tabs">
                    <div class="category-tab active" data-category="技术">技术</div>
                    <div class="category-tab" data-category="推荐">推荐</div>
                    <div class="category-tab" data-category="生活">生活</div>
                    <div class="category-tab" data-category="博客">博客</div>
                    <div class="category-tab" data-category="设计">设计</div>
                    <div class="category-tab" data-category="其他">其他</div>
                </div>

                <div id="formEditor">
                    <div class="form-group">
                        <label for="friendName">网站名称 *</label>
                        <input type="text" id="friendName" placeholder="请输入网站名称">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="friendUrl">网站链接 *</label>
                            <input type="url" id="friendUrl" placeholder="https://example.com">
                        </div>
                        <div class="form-group">
                            <label for="friendAvatar">头像链接 *</label>
                            <input type="url" id="friendAvatar" placeholder="https://example.com/avatar.jpg">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="friendDescription">网站描述 *</label>
                        <textarea id="friendDescription" placeholder="请输入网站描述..." rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>标签</label>
                        <div class="tag-input">
                            <input type="text" id="tagName" placeholder="标签名称">
                            <input type="color" id="tagColor" value="#d99f00" title="选择颜色">
                            <button id="addTagBtn" class="add-tag-btn">添加</button>
                        </div>
                        <div id="tagsList" class="tags-list"></div>
                    </div>

                    <div class="form-group">
                        <label>友链列表</label>
                        <div id="friendsList" class="friends-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sample-data">
            <h4>数据格式示例：</h4>
            <pre>{
  "分类名称": [
    {
      "name": "网站名称",
      "url": "网站链接",
      "avatar": "头像链接",
      "description": "网站描述",
      "tags": [
        {"name": "标签名", "color": "颜色代码"}
      ]
    }
  ]
}</pre>
        </div>
    </div>

    <script>
        class FriendsEditor {
            constructor() {
                this.currentCategory = '技术';
                this.friendsData = {};
                this.currentTags = [];

                this.init();
            }

            init() {
                this.bindEvents();
                this.loadSampleData();
            }

            bindEvents() {
                // 按钮事件
                document.getElementById('jsonToFormBtn').addEventListener('click', () => this.jsonToForm());
                document.getElementById('formToJsonBtn').addEventListener('click', () => this.formToJson());
                document.getElementById('addFriendBtn').addEventListener('click', () => this.addFriend());
                document.getElementById('clearAllBtn').addEventListener('click', () => this.clearAll());
                document.getElementById('addTagBtn').addEventListener('click', () => this.addTag());

                // 分类标签事件
                document.querySelectorAll('.category-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => this.switchCategory(e.target.dataset.category));
                });

                // 标签输入事件
                document.getElementById('tagName').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTag();
                });

                // JSON编辑器变化事件
                document.getElementById('jsonEditor').addEventListener('input', () => {
                    this.validateJson();
                });
            }

            switchCategory(category) {
                // 更新激活状态
                document.querySelectorAll('.category-tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.category === category);
                });

                this.currentCategory = category;
                this.updateFriendsList();
            }

            addTag() {
                const tagName = document.getElementById('tagName').value.trim();
                const tagColor = document.getElementById('tagColor').value;

                if (!tagName) {
                    this.showStatus('请输入标签名称', 'error');
                    return;
                }

                if (this.currentTags.some(tag => tag.name === tagName)) {
                    this.showStatus('标签已存在', 'error');
                    return;
                }

                this.currentTags.push({ name: tagName, color: tagColor });
                this.updateTagsList();
                this.clearTagInput();
            }

            removeTag(index) {
                this.currentTags.splice(index, 1);
                this.updateTagsList();
            }

            updateTagsList() {
                const tagsList = document.getElementById('tagsList');
                tagsList.innerHTML = '';

                this.currentTags.forEach((tag, index) => {
                    const tagElement = document.createElement('div');
                    tagElement.className = 'tag-item';
                    tagElement.style.backgroundColor = tag.color;
                    tagElement.innerHTML = `
                        ${tag.name}
                        <span class="remove-tag" onclick="editor.removeTag(${index})">×</span>
                    `;
                    tagsList.appendChild(tagElement);
                });
            }

            clearTagInput() {
                document.getElementById('tagName').value = '';
            }

            addFriend() {
                const name = document.getElementById('friendName').value.trim();
                const url = document.getElementById('friendUrl').value.trim();
                const avatar = document.getElementById('friendAvatar').value.trim();
                const description = document.getElementById('friendDescription').value.trim();

                if (!name || !url || !avatar || !description) {
                    this.showStatus('请填写所有必填字段', 'error');
                    return;
                }

                if (!this.friendsData[this.currentCategory]) {
                    this.friendsData[this.currentCategory] = [];
                }

                const friend = {
                    name,
                    url,
                    avatar,
                    description,
                    tags: [...this.currentTags]
                };

                this.friendsData[this.currentCategory].push(friend);
                this.updateFriendsList();
                this.clearForm();
                this.showStatus('友链添加成功', 'success');
            }

            clearForm() {
                document.getElementById('friendName').value = '';
                document.getElementById('friendUrl').value = '';
                document.getElementById('friendAvatar').value = '';
                document.getElementById('friendDescription').value = '';
                this.currentTags = [];
                this.updateTagsList();
            }

            clearAll() {
                if (confirm('确定要清空所有数据吗？')) {
                    this.friendsData = {};
                    this.currentTags = [];
                    document.getElementById('jsonEditor').value = '';
                    this.updateFriendsList();
                    this.updateTagsList();
                    this.showStatus('所有数据已清空', 'success');
                }
            }

            updateFriendsList() {
                const friendsList = document.getElementById('friendsList');
                friendsList.innerHTML = '';

                Object.entries(this.friendsData).forEach(([category, friends]) => {
                    friends.forEach((friend, index) => {
                        const friendElement = document.createElement('div');
                        friendElement.className = 'friend-item';
                        friendElement.innerHTML = `
                            <div class="friend-item-header">
                                <div class="friend-avatar">${friend.name.charAt(0)}</div>
                                <div class="friend-name">${friend.name}</div>
                            </div>
                            <div class="friend-description">${friend.description}</div>
                            <div class="friend-tags">
                                ${friend.tags.map(tag => `<span class="friend-tag" style="background-color: ${tag.color}">${tag.name}</span>`).join('')}
                            </div>
                        `;
                        friendsList.appendChild(friendElement);
                    });
                });
            }

            jsonToForm() {
                const jsonText = document.getElementById('jsonEditor').value.trim();

                if (!jsonText) {
                    this.showStatus('请输入JSON数据', 'error');
                    return;
                }

                try {
                    const data = JSON.parse(jsonText);
                    this.friendsData = data;
                    this.updateFriendsList();
                    this.showStatus('JSON数据加载成功', 'success');
                } catch (e) {
                    this.showStatus('JSON格式错误: ' + e.message, 'error');
                }
            }

            formToJson() {
                const jsonText = JSON.stringify(this.friendsData, null, 2);
                document.getElementById('jsonEditor').value = jsonText;
                this.showStatus('数据已转换为JSON格式', 'success');
            }

            validateJson() {
                const jsonText = document.getElementById('jsonEditor').value.trim();

                if (!jsonText) return;

                try {
                    JSON.parse(jsonText);
                    document.getElementById('jsonEditor').style.borderColor = '#46b450';
                } catch (e) {
                    document.getElementById('jsonEditor').style.borderColor = '#dc3545';
                }
            }

            loadSampleData() {
                // 加载示例数据
                const sampleData = {
                    "技术": [
                        {
                            "name": "示例技术博客",
                            "url": "https://tech.example.com",
                            "avatar": "https://tech.example.com/avatar.jpg",
                            "description": "专注于技术分享的博客",
                            "tags": [
                                {"name": "技术", "color": "#d99f00"},
                                {"name": "博客", "color": "#007cba"}
                            ]
                        }
                    ],
                    "推荐": [
                        {
                            "name": "推荐网站",
                            "url": "https://recommend.example.com",
                            "avatar": "https://recommend.example.com/avatar.jpg",
                            "description": "优质网站推荐",
                            "tags": [
                                {"name": "推荐", "color": "#46b450"}
                            ]
                        }
                    ]
                };

                this.friendsData = sampleData;
                this.updateFriendsList();
            }

            showStatus(message, type) {
                const statusElement = document.getElementById('statusMessage');
                statusElement.textContent = message;
                statusElement.className = `status-message status-${type}`;
                statusElement.classList.remove('hidden');

                setTimeout(() => {
                    statusElement.classList.add('hidden');
                }, 3000);
            }
        }

        // 初始化编辑器
        const editor = new FriendsEditor();
    </script>
</body>
</html>